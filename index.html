<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üéÑ Tombala (ƒ∞nternetsiz) - ƒ∞l + Yemek + Foto + Ses + Skor</title>

<style>
  :root{ --gold:#ffd700; }

  html, body { height: 100%; }
  body{
    margin:0;
    min-height:100vh;
    font-family: Arial, sans-serif;
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* Arka plan */
  #bg{
    position:fixed;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
    z-index:0;
    pointer-events:none;
  }
  .bgShade{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.6);
    z-index:1;
    pointer-events:none;
  }

  /* ‚úÖ 3 kolon: Board | Info | Score */
  .app{
    width:min(1900px, 99vw);
    background:rgba(0,0,0,.62);
    border-radius:26px;
    padding:24px;
    display:grid;
    grid-template-columns: 2.2fr 1fr 0.85fr;
    gap:18px;
    box-shadow:0 0 40px rgba(0,0,0,.55);
    position:relative;
    z-index:2;
  }

  /* SOL: Board */
  .board{ display:grid; grid-template-columns: repeat(10, 1fr); gap:16px; }

  .num{
    aspect-ratio:1; border-radius:22px;
    border:4px solid var(--gold);
    background:linear-gradient(145deg,#b00000,#7a0000);
    display:flex; align-items:center; justify-content:center;
    font-size:44px; font-weight:900;
    user-select:none; cursor:pointer; transition:.15s;
  }
  .num:hover{ transform:scale(1.03); }
  .num.marked{
    background:linear-gradient(145deg,#2ecc71,#27ae60);
    color:#05330f; box-shadow:0 0 18px rgba(46,204,113,.85);
  }

  .actions{ margin-top:18px; display:flex; gap:12px; }
  .btn{
    flex:1; padding:16px 16px; border-radius:18px; border:none; cursor:pointer;
    font-weight:900; font-size:20px; background:var(--gold);
  }
  .btn.win{ background:linear-gradient(145deg,#ffdd00,#ff9900); }

  /* ORTA: ƒ∞l/Yemek Panel */
  .panel{
    background:rgba(15,15,15,.88);
    border-radius:22px;
    padding:18px;
    display:flex; flex-direction:column; gap:12px;
    min-width: 340px;
  }
  .topline{ display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; }
  .pill{
    border:1px solid rgba(255,255,255,.18);
    background:rgba(255,255,255,.08);
    border-radius:999px;
    padding:10px 14px; font-weight:800; font-size:15px;
  }
  .panel h2{ margin:0; text-align:center; color:var(--gold); font-size:30px; }
  .sub{ text-align:center; opacity:.9; font-size:16px; margin-top:-6px; }

  .soundRow{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:space-between;
  }
  .toggle{
    display:flex;
    gap:10px;
    align-items:center;
    font-weight:900;
    font-size:16px;
  }
  input[type="checkbox"]{ width:20px; height:20px; }

  .foods{ display:flex; flex-direction:column; gap:14px; }
  .food{
    border:1px solid rgba(255,255,255,.14);
    border-radius:18px;
    padding:12px; background:rgba(0,0,0,.22);
  }
  .food img{
    width:100%; height:170px; object-fit:cover; border-radius:14px;
    background:rgba(255,255,255,.06); display:block;
  }
  .food .name{ margin-top:8px; text-align:center; font-size:22px; font-weight:900; }
  .blank{
    opacity:.9; text-align:center; padding:18px 10px;
    border:1px dashed rgba(255,255,255,.22); border-radius:18px;
    font-size:18px;
  }

  /* SAƒû: Skor Paneli (tam ayrƒ± + sticky) */
  .scorePanel{
    background:rgba(15,15,15,.88);
    border-radius:22px;
    padding:18px;
    display:flex;
    flex-direction:column;
    gap:12px;
    min-width: 320px;

    position: sticky;
    top: 16px;
    height: calc(100vh - 64px);
    max-height: 920px;
  }

  .scoreTitle{
    text-align:center;
    font-weight:900;
    font-size:22px;
    color:var(--gold);
    margin:0;
  }

  .scoreAddRow{
    display:flex;
    gap:10px;
    align-items:center;
  }
  .scoreInput{
    flex:1;
    padding:12px 12px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.18);
    background:rgba(255,255,255,.08);
    color:#fff;
    font-size:16px;
    outline:none;
  }
  .scoreBtn{
    padding:12px 12px;
    border-radius:12px;
    border:none;
    cursor:pointer;
    font-weight:900;
    font-size:16px;
    background:var(--gold);
  }
  .scoreBtn.danger{
    background:#ff4d4d;
    color:#160000;
  }

  .scoreList{
    display:flex;
    flex-direction:column;
    gap:10px;
    overflow:auto;
    padding-right: 6px;
  }

  .scoreRow{
    display:grid;
    grid-template-columns: 1fr auto auto auto auto;
    gap:10px;
    align-items:center;
    padding:12px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(0,0,0,.22);
  }
  .scoreName{
    font-weight:900;
    font-size:16px;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
  }
  .scoreVal{
    font-weight:900;
    font-size:18px;
    min-width:34px;
    text-align:center;
  }
  .scoreMiniBtn{
    width:46px;
    height:40px;
    border-radius:12px;
    border:none;
    cursor:pointer;
    font-weight:900;
    font-size:18px;
    background:rgba(255,255,255,.14);
    color:#fff;
  }
  .scoreMiniBtn.scoreDel{ background:rgba(255,80,80,.25); }

  /* Mobilde kolonlar alt alta */
  @media (max-width:1250px){
    .app{ grid-template-columns: 1fr; }
    .board{ grid-template-columns: repeat(5, 1fr); }
    .num{ font-size:38px; }
    .scorePanel{ position: relative; top:auto; height:auto; max-height:none; }
    .scoreList{ max-height:none; }
  }
</style>
</head>

<body>
  <img id="bg" src="bg_noel.png" alt="">
  <div class="bgShade"></div>

  <div class="app">

    <!-- SOL -->
    <div>
      <div class="board" id="board"></div>
      <div class="actions">
        <button class="btn" id="clearMarked">ƒ∞≈üaretleri Temizle</button>
        <button class="btn" id="clearAll">Hepsini Sƒ±fƒ±rla</button>
        <button class="btn win" id="winBtn">üèÜ ZAFER!</button>
      </div>
    </div>

    <!-- ORTA -->
    <div class="panel">
      <div class="topline">
        <div class="pill" id="lastPickPill">Son sayƒ±: ‚Äî</div>
        <div class="pill">1‚Äì81: ƒ∞l+Foto ‚Ä¢ 82‚Äì90: Bo≈ü</div>
      </div>

      <div class="soundRow">
        <div class="toggle">
          <input id="fxOn" type="checkbox" checked>
          <label for="fxOn">Efekt</label>
        </div>
        <div class="toggle">
          <input id="ttsOn" type="checkbox" checked>
          <label for="ttsOn">Sesli okuma</label>
        </div>
      </div>

      <h2 id="cityTitle">üìç Sayƒ± Bekleniyor</h2>
      <div class="sub" id="pickedInfo">Tƒ±kla ‚Üí ding + c√ºmleli okuma üîä</div>

      <div class="foods" id="foodsWrap">
        <div class="blank">Bir sayƒ± se√ßince burada il ve yemekler g√∂r√ºnecek.</div>
      </div>
    </div>

    <!-- SAƒû -->
    <aside class="scorePanel">
      <h3 class="scoreTitle">üèÜ Skor Tablosu</h3>

      <div class="scoreAddRow">
        <input id="playerName" class="scoreInput" type="text" placeholder="ƒ∞sim yaz (√∂rn: Efe)">
        <button id="addPlayerBtn" class="scoreBtn">Ekle</button>
        <button id="resetScoresBtn" class="scoreBtn danger">Sƒ±fƒ±rla</button>
      </div>

      <div id="scoreList" class="scoreList"></div>
    </aside>

  </div>

<script>
/* SES */
const ding = new Audio("ding.wav"); ding.preload="auto";
const alkis = new Audio("alkis.wav"); alkis.preload="auto";

/* TTS */
function speakTR(text){
  if (!("speechSynthesis" in window)) return;
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "tr-TR";
  u.rate = 1.0; u.pitch = 1.0;
  const voices = window.speechSynthesis.getVoices();
  const trVoice = voices.find(v => (v.lang || "").toLowerCase().startsWith("tr"));
  if (trVoice) u.voice = trVoice;
  window.speechSynthesis.speak(u);
}
function numberToTr(n){
  const ones=["sƒ±fƒ±r","bir","iki","√º√ß","d√∂rt","be≈ü","altƒ±","yedi","sekiz","dokuz"];
  const tens=["","on","yirmi","otuz","kƒ±rk","elli","altmƒ±≈ü","yetmi≈ü","seksen","doksan"];
  if(n===0) return ones[0];
  if(n<10) return ones[n];
  if(n<20) return n===10 ? "on" : "on " + ones[n-10];
  return tens[Math.floor(n/10)] + (n%10 ? " " + ones[n%10] : "");
}

/* 81 ƒ∞L */
const cities = [
  "Adana","Adƒ±yaman","Afyonkarahisar","Aƒürƒ±","Amasya","Ankara","Antalya","Artvin","Aydƒ±n","Balƒ±kesir",
  "Bilecik","Bing√∂l","Bitlis","Bolu","Burdur","Bursa","√áanakkale","√áankƒ±rƒ±","√áorum","Denizli",
  "Diyarbakƒ±r","Edirne","Elazƒ±ƒü","Erzincan","Erzurum","Eski≈üehir","Gaziantep","Giresun","G√ºm√º≈ühane","Hakkari",
  "Hatay","Isparta","Mersin","ƒ∞stanbul","ƒ∞zmir","Kars","Kastamonu","Kayseri","Kƒ±rklareli","Kƒ±r≈üehir",
  "Kocaeli","Konya","K√ºtahya","Malatya","Manisa","Kahramanmara≈ü","Mardin","Muƒüla","Mu≈ü","Nev≈üehir",
  "Niƒüde","Ordu","Rize","Sakarya","Samsun","Siirt","Sinop","Sivas","Tekirdaƒü","Tokat",
  "Trabzon","Tunceli","≈ûanlƒ±urfa","U≈üak","Van","Yozgat","Zonguldak","Aksaray","Bayburt","Karaman",
  "Kƒ±rƒ±kkale","Batman","≈ûƒ±rnak","Bartƒ±n","Ardahan","Iƒüdƒ±r","Yalova","Karab√ºk","Kilis","Osmaniye","D√ºzce"
];

/* 3 YEMEK (FULL) */
const foodsByCity = {
  "Adana":["Adana kebabƒ±","≈ûalgam","Bici bici"],
  "Adƒ±yaman":["√áiƒü k√∂fte","ƒ∞√ßli k√∂fte","Besni tavasƒ±"],
  "Afyonkarahisar":["Afyon sucuƒüu","Kaymak","Ke≈ükek"],
  "Aƒürƒ±":["Abdig√∂r k√∂ftesi","Aƒürƒ± ketesi","Ayran a≈üƒ±"],
  "Amasya":["Amasya √ß√∂reƒüi","Bakla dolmasƒ±","Toyga √ßorbasƒ±"],
  "Ankara":["Ankara tava","Beypazarƒ± g√ºveci","Aspava"],
  "Antalya":["Antalya piyazƒ±","Hibe≈ü","Serpme b√∂rek"],
  "Artvin":["Kuymak (mƒ±hlama)","Laz b√∂reƒüi","Karalahana sarmasƒ±"],
  "Aydƒ±n":["√áine k√∂ftesi","G√∂zleme","Ke≈ükek"],
  "Balƒ±kesir":["H√∂≈ümerim","Tirit","Sura"],
  "Bilecik":["Bƒ±ldƒ±rcƒ±n kebabƒ±","Nohutlu mantƒ±","Boza"],
  "Bing√∂l":["Sorina pel","L√∂l","Mastuva"],
  "Bitlis":["B√ºryan kebabƒ±","Ayran a≈üƒ±","Kete"],
  "Bolu":["Mengen pilavƒ±","Kabaklƒ± g√∂zleme","Abant kebabƒ±"],
  "Burdur":["Burdur ≈üi≈ü","Ceviz ezmesi","Tarhana √ßorbasƒ±"],
  "Bursa":["ƒ∞skender kebap","ƒ∞neg√∂l k√∂fte","Kemalpa≈üa tatlƒ±sƒ±"],
  "√áanakkale":["Peynir helvasƒ±","Oƒülak √ßevirme","Sardalya"],
  "√áankƒ±rƒ±":["Yaren g√ºveci","Tuzlu yoƒüurt","Kƒ±zƒ±lcƒ±k tarhanasƒ±"],
  "√áorum":["ƒ∞skilip dolmasƒ±","Leblebi","Madƒ±mak"],
  "Denizli":["Denizli kebabƒ±","Tandƒ±r","Leblebi helvasƒ±"],
  "Diyarbakƒ±r":["Ciƒüer kebabƒ±","Meftune","Burma kadayƒ±f"],
  "Edirne":["Tava ciƒüer","Badem ezmesi","Kavala kurabiyesi"],
  "Elazƒ±ƒü":["Harput k√∂ftesi","G√∂mme","Orcik"],
  "Erzincan":["Tulum peyniri","Kesme √ßorba","Yaprak d√∂ner"],
  "Erzurum":["Caƒü kebabƒ±","Kadayƒ±f dolmasƒ±","Ayran a≈üƒ±"],
  "Eski≈üehir":["√áib√∂rek","Balaban k√∂fte","Met helvasƒ±"],
  "Gaziantep":["Beyran","Ali nazik","Baklava"],
  "Giresun":["Karalahana √ßorbasƒ±","Giresun pidesi","Fƒ±ndƒ±klƒ± tatlƒ±lar"],
  "G√ºm√º≈ühane":["Pestil","K√∂me","Siron"],
  "Hakkari":["Doƒüaba","Keledo≈ü","Tandƒ±r ekmeƒüi"],
  "Hatay":["K√ºnefe","Tepsi kebabƒ±","Humus"],
  "Isparta":["G√ºl lokumu","Kabune pilavƒ±","Ke≈ükek"],
  "Mersin":["Tantuni","Cezerye","Kerebi√ß"],
  "ƒ∞stanbul":["Balƒ±k ekmek","Islak hamburger","Sultanahmet k√∂fte"],
  "ƒ∞zmir":["Boyoz","Kumru","Midye dolma"],
  "Kars":["Kars kazƒ±","Gravyer peyniri","Hangel"],
  "Kastamonu":["Etli ekmek","Banduma","√áekme helva"],
  "Kayseri":["Mantƒ±","Pastƒ±rma","Sucuk"],
  "Kƒ±rklareli":["Papara","Hardaliye","Kƒ±rklareli k√∂ftesi"],
  "Kƒ±r≈üehir":["Kesme a≈üƒ±","Tandƒ±r","√áullama"],
  "Kocaeli":["Pi≈ümaniye","Cƒ±zlama","Kandƒ±ra yoƒüurdu"],
  "Konya":["Etli ekmek","Fƒ±rƒ±n kebabƒ±","Bamya √ßorbasƒ±"],
  "K√ºtahya":["Cimcik","Tirit","Ha≈üha≈ülƒ± g√∂zleme"],
  "Malatya":["Kayƒ±sƒ± tatlƒ±larƒ±","Analƒ± kƒ±zlƒ±","Kaƒüƒ±t kebabƒ±"],
  "Manisa":["Manisa kebabƒ±","Mesir macunu","Simit kebabƒ±"],
  "Kahramanmara≈ü":["Mara≈ü dondurmasƒ±","Tarhana","ƒ∞√ßli k√∂fte"],
  "Mardin":["Kaburga dolmasƒ±","ƒ∞kbebet","Harire"],
  "Muƒüla":["√á√∂kertme kebabƒ±","Ke≈ükek","S√ºnd√ºrme"],
  "Mu≈ü":["Keledo≈ü","Mu≈ü k√∂ftesi","Herle √ßorbasƒ±"],
  "Nev≈üehir":["Testi kebabƒ±","Dolaz","D√ºƒü√º √ßorbasƒ±"],
  "Niƒüde":["Niƒüde tahinlisi","Tirit","K√∂mbe"],
  "Ordu":["Pancar √ßorbasƒ±","Mƒ±sƒ±r ekmeƒüi","Hamsili pilav"],
  "Rize":["Rize kavurmasƒ±","Muhlama","Laz b√∂reƒüi"],
  "Sakarya":["Islama k√∂fte","Kabak tatlƒ±sƒ±","Uƒüut tatlƒ±sƒ±"],
  "Samsun":["Bafra pidesi","√áakallƒ± menemeni","Kaz tiridi"],
  "Siirt":["B√ºryan","Perde pilavƒ±","Zivzik narƒ± tatlƒ±larƒ±"],
  "Sinop":["Sinop mantƒ±sƒ±","Nokul","Kestane balƒ± tatlƒ±larƒ±"],
  "Sivas":["Sivas k√∂ftesi","Madƒ±mak","Hingel"],
  "Tekirdaƒü":["Tekirdaƒü k√∂ftesi","Hayrabolu tatlƒ±sƒ±","Peynir helvasƒ±"],
  "Tokat":["Tokat kebabƒ±","Bat","Zile pekmezi"],
  "Trabzon":["Kuymak","Hamsi tava","Ak√ßaabat k√∂fte"],
  "Tunceli":["Gulik (ƒ±≈ükƒ±n)","D√∂ƒüme√ß","Kavut"],
  "≈ûanlƒ±urfa":["√áiƒü k√∂fte","Urfa kebabƒ±","Lahmacun"],
  "U≈üak":["Tarhana √ßorbasƒ±","Ke≈ükek","Cendere tatlƒ±sƒ±"],
  "Van":["Van kahvaltƒ±sƒ±","Keledo≈ü","Otlu peynir"],
  "Yozgat":["Testi kebabƒ±","Araba≈üƒ±","S√ºrmeli pilav"],
  "Zonguldak":["Ereƒüli pidesi","Uƒüma√ß √ßorbasƒ±","Mancar sarmasƒ±"],
  "Aksaray":["Aksaray tava","Soƒüanlama","Bamya √ßorbasƒ±"],
  "Bayburt":["Lor dolmasƒ±","Galaco≈ü","Herse"],
  "Karaman":["Calla","Araba≈üƒ±","Batƒ±rƒ±k"],
  "Kƒ±rƒ±kkale":["Keskin tava","Katmer","Tarhana"],
  "Batman":["ƒ∞√ßli k√∂fte","Perde pilavƒ±","Kaburga dolmasƒ±"],
  "≈ûƒ±rnak":["Kutlƒ±k","Serbidev","Mumbar dolmasƒ±"],
  "Bartƒ±n":["K√∂me√ß","Tatlƒ± b√∂rek","Pirin√ßli mantƒ±"],
  "Ardahan":["Kaz eti","Hangel","Eri≈üte"],
  "Iƒüdƒ±r":["Bozba≈ü","Ta≈ü k√∂fte","Katmer"],
  "Yalova":["Yalova s√ºtl√ºs√º","K√∂y b√∂reƒüi","Kestane ≈üekeri"],
  "Karab√ºk":["Safranbolu lokumu","B√ºkme","Peruhi"],
  "Kilis":["Kilis tava","Oruk","Cennet √ßamuru"],
  "Osmaniye":["Fƒ±stƒ±klƒ± tatlƒ±lar","K√∂mbecik","Etli sarma"],
  "D√ºzce":["D√ºzce k√∂ftesi","Meleng√ºcceƒüi tatlƒ±sƒ±","Mƒ±sƒ±r ekmeƒüi"]
};

/* ƒ∞stanbul/ƒ∞zmir fix: ƒ∞ -> iÃá sorununu normalize ile temizle */
function slugCity(city){
  return city
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "")
    .replace(/ƒ±/g, "i")
    .replace(/≈ü/g, "s")
    .replace(/ƒü/g, "g")
    .replace(/√º/g, "u")
    .replace(/√∂/g, "o")
    .replace(/√ß/g, "c")
    .replace(/[^a-z0-9]/g, "");
}

function renderBlank(msg){
  document.getElementById("cityTitle").textContent = "üìç ‚Äî";
  document.getElementById("pickedInfo").textContent = msg || "82‚Äì90: Panel bo≈ü.";
  document.getElementById("foodsWrap").innerHTML =
    `<div class="blank">82‚Äì90 arasƒ± sayƒ±lar i√ßin panel bo≈ü ‚úÖ</div>`;
}

function renderCity(city, pickedNumber){
  document.getElementById("cityTitle").textContent = "üìç " + city;
  document.getElementById("pickedInfo").textContent = `Se√ßilen sayƒ±: ${pickedNumber} ‚Ä¢ ƒ∞l: ${city}`;

  const dishes = foodsByCity[city] || ["Yemek 1","Yemek 2","Yemek 3"];
  const s = slugCity(city);
  const wrap = document.getElementById("foodsWrap");
  wrap.innerHTML = "";

  for(let i=0;i<3;i++){
    const dish = dishes[i];
    const card = document.createElement("div");
    card.className = "food";

    const img = document.createElement("img");
    img.alt = dish;
    img.src = `imgs/${s}0${i+1}.png`;  // imgs/istanbul01.png gibi
    img.onerror = () => { img.style.display="none"; };

    const name = document.createElement("div");
    name.className="name";
    name.textContent = dish;

    card.appendChild(img);
    card.appendChild(name);
    wrap.appendChild(card);
  }
}

/* Board */
const board = document.getElementById("board");
for(let i=1;i<=90;i++){
  const d=document.createElement("div");
  d.className="num";
  d.textContent=i;
  d.onclick=()=>onPick(d,i);
  board.appendChild(d);
}

document.getElementById("clearMarked").onclick=()=>{
  document.querySelectorAll(".num.marked").forEach(x=>x.classList.remove("marked"));
};

document.getElementById("clearAll").onclick=()=>{
  document.querySelectorAll(".num").forEach(x=>x.classList.remove("marked"));
  document.getElementById("lastPickPill").textContent = "Son sayƒ±: ‚Äî";
  renderBlank("Hepsi sƒ±fƒ±rlandƒ±.");
};

const fxOn = document.getElementById("fxOn");
const ttsOn = document.getElementById("ttsOn");

function playDing(){
  if(!fxOn.checked) return;
  try{ ding.currentTime=0; ding.play(); }catch{}
}
function speakNumber(n){
  if(!ttsOn.checked) return;
  const tr = numberToTr(n);
  const phrases = [`Sayƒ± ${tr}!`, `${tr} numara!`, `${tr} geldi!`, `√áekilen sayƒ± ${tr}!`];
  speakTR(phrases[Math.floor(Math.random()*phrases.length)]);
}

function onPick(div, n){
  div.classList.toggle("marked");
  document.getElementById("lastPickPill").textContent = "Son sayƒ±: " + n;

  playDing();
  speakNumber(n);

  if(n>81){ renderBlank("82‚Äì90 se√ßildi: Panel bo≈ü."); return; }
  renderCity(cities[n-1], n);
}

/* Zafer */
document.getElementById("winBtn").onclick = ()=>{
  try{ alkis.currentTime=0; alkis.play(); }catch{}
  speakTR("Tombala! Tebrikler!");
  document.getElementById("cityTitle").textContent = "üéâ KAZANILDI!";
  document.getElementById("pickedInfo").textContent = "Mutlu yƒ±llar!";
};

/* Skor (kalƒ±cƒ±) */
const LS_KEY = "tombala_scores_v1";
function loadScores(){ try{ return JSON.parse(localStorage.getItem(LS_KEY) || "[]"); }catch{ return []; } }
function saveScores(arr){ localStorage.setItem(LS_KEY, JSON.stringify(arr)); }

let scores = loadScores();

const scoreList = document.getElementById("scoreList");
const playerName = document.getElementById("playerName");
const addPlayerBtn = document.getElementById("addPlayerBtn");
const resetScoresBtn = document.getElementById("resetScoresBtn");

function renderScores(){
  scoreList.innerHTML = "";
  if(scores.length === 0){
    scoreList.innerHTML = `<div class="blank">Hen√ºz oyuncu yok. ƒ∞sim yazƒ±p ‚ÄúEkle‚Äù de ‚úÖ</div>`;
    return;
  }
  scores
    .slice()
    .sort((a,b)=> b.wins - a.wins || a.name.localeCompare(b.name))
    .forEach((p)=>{
      const row = document.createElement("div");
      row.className = "scoreRow";
      row.innerHTML = `
        <div class="scoreName">${p.name}</div>
        <button class="scoreMiniBtn" title="+1">+</button>
        <div class="scoreVal">${p.wins}</div>
        <button class="scoreMiniBtn" title="-1">‚àí</button>
        <button class="scoreMiniBtn scoreDel" title="Sil">‚úï</button>
      `;
      row.children[1].onclick = ()=>{ p.wins += 1; saveScores(scores); renderScores(); };
      row.children[3].onclick = ()=>{ p.wins = Math.max(0, p.wins - 1); saveScores(scores); renderScores(); };
      row.children[4].onclick = ()=>{ scores = scores.filter(x => x !== p); saveScores(scores); renderScores(); };
      scoreList.appendChild(row);
    });
}

function addPlayer(){
  const name = (playerName.value || "").trim();
  if(!name) return;
  const exists = scores.some(p => p.name.toLowerCase() === name.toLowerCase());
  if(!exists){ scores.push({ name, wins: 0 }); saveScores(scores); }
  playerName.value = "";
  renderScores();
}

addPlayerBtn.onclick = addPlayer;
playerName.addEventListener("keydown", (e)=>{ if(e.key === "Enter") addPlayer(); });

resetScoresBtn.onclick = ()=>{ scores = []; saveScores(scores); renderScores(); };

renderScores();
</script>
</body>
</html>
